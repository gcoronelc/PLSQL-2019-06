/*

SINTAXIS:

TYPE nuevo_tipo_dato IS TABLE OF
{
		column_type 
		| variable%TYPE 
		| table.column%TYPE} [NOT NULL]
		| table%ROWTYPE
}
INDEX BY {PLS_INTEGER|BINARY_INTEGER|VARCHAR2(<tamaÃ±o>);

*/


-- ARRAYAS ASOCIATIVOS

-- EJEMPLO 1

DECLARE
	TYPE  ARRAY_NOTAS IS TABLE OF NUMBER INDEX BY BINARY_INTEGER;
	NOTAS ARRAY_NOTAS;
BEGIN
	-- CARGAR NOTAS
	NOTAS(1) := 20;
	NOTAS(2) := 18;
	NOTAS(3) := 15;
	NOTAS(4) := 17;
	-- MOSTRAR NOTAS
	DBMS_OUTPUT.PUT_LINE('TAMAÑO: ' || NOTAS.COUNT);
	FOR I IN 1..NOTAS.COUNT LOOP
		DBMS_OUTPUT.PUT_LINE('NOTA ' || I || ': ' || NOTAS(I));
	END LOOP;
END;


-- EJEMPLO 1.1

DECLARE
	TYPE ARRAY_NOTAS IS TABLE OF NUMBER INDEX BY BINARY_INTEGER;
	NOTAS ARRAY_NOTAS;
  V_I   NUMBER(5);
BEGIN
	-- CARGAR NOTAS
	NOTAS(10) := 20;
	NOTAS(20) := 18;
	NOTAS(3) := 15;
	NOTAS(5) := 17;
	-- MOSTRAR NOTAS
	DBMS_OUTPUT.PUT_LINE('TAMAÑO: ' || NOTAS.COUNT);
  V_I := NOTAS.FIRST;
	FOR N IN 1 .. NOTAS.COUNT LOOP
    -- DBMS_OUTPUT.PUT_LINE('NOTA ' || I || ': ' || NOTAS(I)); -- Error
		DBMS_OUTPUT.PUT_LINE('NOTA ' || V_I || ': ' || NOTAS(V_I));
    V_I := NOTAS.NEXT(V_I);
	END LOOP;
END;




-- EJEMPLO 2

DECLARE
	-- Definimos los tipo de datos
	TYPE ARRAY_EMPLEADOS IS TABLE OF RECURSOS.EMPLEADO%ROWTYPE
	INDEX BY BINARY_INTEGER;
	-- Definiendo las variables
	V_EMPLEADOS ARRAY_EMPLEADOS;
BEGIN
  
  -- Este FOR llena el arreglo
	DBMS_OUTPUT.PUT_LINE('TAMAÑO INICIAL: ' || V_EMPLEADOS.COUNT);
	FOR REC IN (SELECT * FROM RECURSOS.EMPLEADO) LOOP
		V_EMPLEADOS(V_EMPLEADOS.COUNT + 1) := REC;
	END LOOP;
  
  -- Muestra el arreglo
	DBMS_OUTPUT.PUT_LINE('TAMAÑO FINAL: ' || V_EMPLEADOS.COUNT);
	FOR I IN V_EMPLEADOS.FIRST..V_EMPLEADOS.LAST LOOP
		DBMS_OUTPUT.PUT_LINE( I || '.- ' || V_EMPLEADOS(I).NOMBRE);
	END LOOP;
END;

